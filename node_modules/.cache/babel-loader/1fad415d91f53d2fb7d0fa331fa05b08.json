{"ast":null,"code":"import * as React from 'react';\nimport { useState, useEffect, Children } from 'react';\nimport { Navigate, Route, Routes } from 'react-router-dom';\nimport { WithPermissions, useCheckAuth } from '../auth';\nimport { useTimeout } from '../util';\nimport { useScrollToTop, useCreatePath } from '../routing';\nimport { useConfigureAdminRouterFromChildren } from './useConfigureAdminRouterFromChildren';\nexport var CoreAdminRoutes = function (props) {\n  var oneSecondHasPassed = useTimeout(1000);\n  useScrollToTop();\n  var createPath = useCreatePath();\n\n  var _a = useConfigureAdminRouterFromChildren(props.children),\n      customRoutesWithLayout = _a.customRoutesWithLayout,\n      customRoutesWithoutLayout = _a.customRoutesWithoutLayout,\n      status = _a.status,\n      resources = _a.resources;\n\n  var Layout = props.layout,\n      CatchAll = props.catchAll,\n      dashboard = props.dashboard,\n      LoadingPage = props.loading,\n      menu = props.menu,\n      requireAuth = props.requireAuth,\n      Ready = props.ready,\n      title = props.title;\n\n  var _b = useState(!requireAuth),\n      canRender = _b[0],\n      setCanRender = _b[1];\n\n  var checkAuth = useCheckAuth();\n  useEffect(function () {\n    if (requireAuth) {\n      checkAuth().then(function () {\n        setCanRender(true);\n      }).catch(function () {});\n    }\n  }, [checkAuth, requireAuth]);\n\n  if (status === 'empty') {\n    return React.createElement(Ready, null);\n  }\n\n  if (status === 'loading' || !canRender) {\n    return React.createElement(Routes, null, customRoutesWithoutLayout, oneSecondHasPassed ? React.createElement(Route, {\n      path: \"*\",\n      element: React.createElement(LoadingPage, null)\n    }) : React.createElement(Route, {\n      path: \"*\",\n      element: null\n    }));\n  }\n\n  return React.createElement(Routes, null, customRoutesWithoutLayout, React.createElement(Route, {\n    path: \"/*\",\n    element: React.createElement(\"div\", null, React.createElement(Layout, {\n      dashboard: dashboard,\n      menu: menu,\n      title: title\n    }, React.createElement(Routes, null, customRoutesWithLayout, Children.map(resources, function (resource) {\n      return React.createElement(Route, {\n        key: resource.props.name,\n        path: \"\".concat(resource.props.name, \"/*\"),\n        element: resource\n      });\n    }), React.createElement(Route, {\n      path: \"/\",\n      element: dashboard ? React.createElement(WithPermissions, {\n        authParams: defaultAuthParams,\n        component: dashboard\n      }) : resources.length > 0 ? React.createElement(Navigate, {\n        to: createPath({\n          resource: resources[0].props.name,\n          type: 'list'\n        })\n      }) : null\n    }), React.createElement(Route, {\n      path: \"*\",\n      element: React.createElement(CatchAll, {\n        title: title\n      })\n    }))))\n  }));\n};\nCoreAdminRoutes.defaultProps = {\n  customRoutes: []\n};\nvar defaultAuthParams = {\n  route: 'dashboard'\n};","map":{"version":3,"names":["React","useState","useEffect","Children","Navigate","Route","Routes","WithPermissions","useCheckAuth","useTimeout","useScrollToTop","useCreatePath","useConfigureAdminRouterFromChildren","CoreAdminRoutes","props","oneSecondHasPassed","createPath","_a","children","customRoutesWithLayout","customRoutesWithoutLayout","status","resources","Layout","layout","CatchAll","catchAll","dashboard","LoadingPage","loading","menu","requireAuth","Ready","ready","title","_b","canRender","setCanRender","checkAuth","then","catch","createElement","path","element","map","resource","key","name","concat","authParams","defaultAuthParams","component","length","to","type","defaultProps","customRoutes","route"],"sources":["/Users/evgenijgnedcik/Documents/GitHub/adminPixomnia/node_modules/ra-core/dist/esm/core/CoreAdminRoutes.js"],"sourcesContent":["import * as React from 'react';\nimport { useState, useEffect, Children } from 'react';\nimport { Navigate, Route, Routes } from 'react-router-dom';\nimport { WithPermissions, useCheckAuth } from '../auth';\nimport { useTimeout } from '../util';\nimport { useScrollToTop, useCreatePath } from '../routing';\nimport { useConfigureAdminRouterFromChildren } from './useConfigureAdminRouterFromChildren';\nexport var CoreAdminRoutes = function (props) {\n    var oneSecondHasPassed = useTimeout(1000);\n    useScrollToTop();\n    var createPath = useCreatePath();\n    var _a = useConfigureAdminRouterFromChildren(props.children), customRoutesWithLayout = _a.customRoutesWithLayout, customRoutesWithoutLayout = _a.customRoutesWithoutLayout, status = _a.status, resources = _a.resources;\n    var Layout = props.layout, CatchAll = props.catchAll, dashboard = props.dashboard, LoadingPage = props.loading, menu = props.menu, requireAuth = props.requireAuth, Ready = props.ready, title = props.title;\n    var _b = useState(!requireAuth), canRender = _b[0], setCanRender = _b[1];\n    var checkAuth = useCheckAuth();\n    useEffect(function () {\n        if (requireAuth) {\n            checkAuth()\n                .then(function () {\n                setCanRender(true);\n            })\n                .catch(function () { });\n        }\n    }, [checkAuth, requireAuth]);\n    if (status === 'empty') {\n        return React.createElement(Ready, null);\n    }\n    if (status === 'loading' || !canRender) {\n        return (React.createElement(Routes, null,\n            customRoutesWithoutLayout,\n            oneSecondHasPassed ? (React.createElement(Route, { path: \"*\", element: React.createElement(LoadingPage, null) })) : (React.createElement(Route, { path: \"*\", element: null }))));\n    }\n    return (React.createElement(Routes, null,\n        customRoutesWithoutLayout,\n        React.createElement(Route, { path: \"/*\", element: React.createElement(\"div\", null,\n                React.createElement(Layout, { dashboard: dashboard, menu: menu, title: title },\n                    React.createElement(Routes, null,\n                        customRoutesWithLayout,\n                        Children.map(resources, function (resource) { return (React.createElement(Route, { key: resource.props.name, path: \"\".concat(resource.props.name, \"/*\"), element: resource })); }),\n                        React.createElement(Route, { path: \"/\", element: dashboard ? (React.createElement(WithPermissions, { authParams: defaultAuthParams, component: dashboard })) : resources.length > 0 ? (React.createElement(Navigate, { to: createPath({\n                                    resource: resources[0].props.name,\n                                    type: 'list',\n                                }) })) : null }),\n                        React.createElement(Route, { path: \"*\", element: React.createElement(CatchAll, { title: title }) })))) })));\n};\nCoreAdminRoutes.defaultProps = {\n    customRoutes: [],\n};\nvar defaultAuthParams = { route: 'dashboard' };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}