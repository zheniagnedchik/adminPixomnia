{"ast":null,"code":"import * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { I18nContext } from './I18nContext';\nimport { useStore } from '../store/useStore';\nimport { useNotify } from '../notification';\n/**\n * Store the i18nProvider in a context, and rerender children when the locale changes\n */\n\nexport var I18nContextProvider = function (_a) {\n  var _b = _a.value,\n      value = _b === void 0 ? defaulti18nContext : _b,\n      children = _a.children;\n  var locale = useStore('locale')[0];\n  var notify = useNotify();\n\n  var _c = useState(0),\n      key = _c[0],\n      setKey = _c[1]; // to avoid blinking effect, delay first render if the user has a non-default locale\n\n\n  var _d = useState(locale === value.getLocale()),\n      isInitialized = _d[0],\n      setInitialized = _d[1]; // watch store for locale changes\n\n\n  useEffect(function () {\n    if (locale && value.getLocale() !== locale) {\n      new Promise(function (resolve) {\n        // so we systematically return a Promise for the messages\n        // i18nProvider may return a Promise for language changes,\n        resolve(value.changeLocale(locale));\n      }).then(function () {\n        // Force full page re-render.\n        // This is slow on locale change, but it's a good way\n        // to avoid having one subscription to the locale\n        // for each call to translate()\n        setKey(function (key) {\n          return key + 1;\n        });\n        setInitialized(true);\n      }).catch(function (error) {\n        setInitialized(true);\n        notify('ra.notification.i18n_error', {\n          type: 'warning'\n        });\n        console.error(error);\n      });\n    } else {\n      setInitialized(true);\n    }\n  }, [value, locale, notify]);\n  return isInitialized ? React.createElement(I18nContext.Provider, {\n    value: value,\n    key: key\n  }, children) : null;\n};\nvar defaulti18nContext = {\n  translate: function (x) {\n    return x;\n  },\n  changeLocale: function () {\n    return Promise.resolve();\n  },\n  getLocale: function () {\n    return 'en';\n  }\n};","map":{"version":3,"names":["React","useEffect","useState","I18nContext","useStore","useNotify","I18nContextProvider","_a","_b","value","defaulti18nContext","children","locale","notify","_c","key","setKey","_d","getLocale","isInitialized","setInitialized","Promise","resolve","changeLocale","then","catch","error","type","console","createElement","Provider","translate","x"],"sources":["/Users/evgenijgnedcik/Documents/GitHub/adminPixomnia/node_modules/ra-core/dist/esm/i18n/I18nContextProvider.js"],"sourcesContent":["import * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { I18nContext } from './I18nContext';\nimport { useStore } from '../store/useStore';\nimport { useNotify } from '../notification';\n/**\n * Store the i18nProvider in a context, and rerender children when the locale changes\n */\nexport var I18nContextProvider = function (_a) {\n    var _b = _a.value, value = _b === void 0 ? defaulti18nContext : _b, children = _a.children;\n    var locale = useStore('locale')[0];\n    var notify = useNotify();\n    var _c = useState(0), key = _c[0], setKey = _c[1];\n    // to avoid blinking effect, delay first render if the user has a non-default locale\n    var _d = useState(locale === value.getLocale()), isInitialized = _d[0], setInitialized = _d[1];\n    // watch store for locale changes\n    useEffect(function () {\n        if (locale && value.getLocale() !== locale) {\n            new Promise(function (resolve) {\n                // so we systematically return a Promise for the messages\n                // i18nProvider may return a Promise for language changes,\n                resolve(value.changeLocale(locale));\n            })\n                .then(function () {\n                // Force full page re-render.\n                // This is slow on locale change, but it's a good way\n                // to avoid having one subscription to the locale\n                // for each call to translate()\n                setKey(function (key) { return key + 1; });\n                setInitialized(true);\n            })\n                .catch(function (error) {\n                setInitialized(true);\n                notify('ra.notification.i18n_error', { type: 'warning' });\n                console.error(error);\n            });\n        }\n        else {\n            setInitialized(true);\n        }\n    }, [value, locale, notify]);\n    return isInitialized ? (React.createElement(I18nContext.Provider, { value: value, key: key }, children)) : null;\n};\nvar defaulti18nContext = {\n    translate: function (x) { return x; },\n    changeLocale: function () { return Promise.resolve(); },\n    getLocale: function () { return 'en'; },\n};\n"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA;AACA;AACA;;AACA,OAAO,IAAIC,mBAAmB,GAAG,UAAUC,EAAV,EAAc;EAC3C,IAAIC,EAAE,GAAGD,EAAE,CAACE,KAAZ;EAAA,IAAmBA,KAAK,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgBE,kBAAhB,GAAqCF,EAAhE;EAAA,IAAoEG,QAAQ,GAAGJ,EAAE,CAACI,QAAlF;EACA,IAAIC,MAAM,GAAGR,QAAQ,CAAC,QAAD,CAAR,CAAmB,CAAnB,CAAb;EACA,IAAIS,MAAM,GAAGR,SAAS,EAAtB;;EACA,IAAIS,EAAE,GAAGZ,QAAQ,CAAC,CAAD,CAAjB;EAAA,IAAsBa,GAAG,GAAGD,EAAE,CAAC,CAAD,CAA9B;EAAA,IAAmCE,MAAM,GAAGF,EAAE,CAAC,CAAD,CAA9C,CAJ2C,CAK3C;;;EACA,IAAIG,EAAE,GAAGf,QAAQ,CAACU,MAAM,KAAKH,KAAK,CAACS,SAAN,EAAZ,CAAjB;EAAA,IAAiDC,aAAa,GAAGF,EAAE,CAAC,CAAD,CAAnE;EAAA,IAAwEG,cAAc,GAAGH,EAAE,CAAC,CAAD,CAA3F,CAN2C,CAO3C;;;EACAhB,SAAS,CAAC,YAAY;IAClB,IAAIW,MAAM,IAAIH,KAAK,CAACS,SAAN,OAAsBN,MAApC,EAA4C;MACxC,IAAIS,OAAJ,CAAY,UAAUC,OAAV,EAAmB;QAC3B;QACA;QACAA,OAAO,CAACb,KAAK,CAACc,YAAN,CAAmBX,MAAnB,CAAD,CAAP;MACH,CAJD,EAKKY,IALL,CAKU,YAAY;QAClB;QACA;QACA;QACA;QACAR,MAAM,CAAC,UAAUD,GAAV,EAAe;UAAE,OAAOA,GAAG,GAAG,CAAb;QAAiB,CAAnC,CAAN;QACAK,cAAc,CAAC,IAAD,CAAd;MACH,CAZD,EAaKK,KAbL,CAaW,UAAUC,KAAV,EAAiB;QACxBN,cAAc,CAAC,IAAD,CAAd;QACAP,MAAM,CAAC,4BAAD,EAA+B;UAAEc,IAAI,EAAE;QAAR,CAA/B,CAAN;QACAC,OAAO,CAACF,KAAR,CAAcA,KAAd;MACH,CAjBD;IAkBH,CAnBD,MAoBK;MACDN,cAAc,CAAC,IAAD,CAAd;IACH;EACJ,CAxBQ,EAwBN,CAACX,KAAD,EAAQG,MAAR,EAAgBC,MAAhB,CAxBM,CAAT;EAyBA,OAAOM,aAAa,GAAInB,KAAK,CAAC6B,aAAN,CAAoB1B,WAAW,CAAC2B,QAAhC,EAA0C;IAAErB,KAAK,EAAEA,KAAT;IAAgBM,GAAG,EAAEA;EAArB,CAA1C,EAAsEJ,QAAtE,CAAJ,GAAuF,IAA3G;AACH,CAlCM;AAmCP,IAAID,kBAAkB,GAAG;EACrBqB,SAAS,EAAE,UAAUC,CAAV,EAAa;IAAE,OAAOA,CAAP;EAAW,CADhB;EAErBT,YAAY,EAAE,YAAY;IAAE,OAAOF,OAAO,CAACC,OAAR,EAAP;EAA2B,CAFlC;EAGrBJ,SAAS,EAAE,YAAY;IAAE,OAAO,IAAP;EAAc;AAHlB,CAAzB"},"metadata":{},"sourceType":"module"}